# API для авторизации и профиля пользователя

## Описание
Этот API предоставляет функциональность для:

- Отправки кода на номер телефона для аутентификации.
- Проверки кода для авторизации.
- Создания и управления профилями пользователей, включая работу с инвайт-кодами.

## Модели
1. **PhoneAuth** - для хранения данных аутентификации.
2. **UserProfile** - для хранения информации о пользователях, включая их номера телефонов и инвайт-коды.
3. **InviteLink** - для хранения данных о пользователях, которые пригласили других пользователей.

## API Эндпоинты

### POST /send-code/
Отправка кода для аутентификации на указанный номер телефона.

**Тело запроса:**
```json
{
    "phone_number": "1234567890"
}
```
**Тело ответа:**

```json
{
    "message": "Код отправлен: 1234 для номера 1234567890"
}
```

### POST /verify-code/
Проверка кода для авторизации.

**Тело запроса:**
```json
{
    "phone_number": "1234567890",
    "auth_code": "1234"
}
```
**Тело ответа:**

```json
{
    "message": "Авторизация успешна",
    "user": {
        "phone_number": "1234567890",
        "created_at": "2024-12-01T10:00:00Z",
        "invite_code": "AB12CD"
    }
}
```

### GET /profile/1234567890/
Получение информации о профиле пользователя и о приглашённых им пользователях.

**Тело ответа:**

```json
{
    "profile": {
        "phone_number": "1234567890",
        "created_at": "2024-12-01T10:00:00Z",
        "invite_code": "AB12CD",
        "activated_invite_code": "XYZ789"
    },
    "invited_users": ["2345678901", "3456789012"]
}
```

### POST /profile/1234567890/
Активация инвайт-кода и привязка пользователей.

**Тело запроса:**
```json
{
    "invite_code": "XYZ789"
}
```
**Тело ответа:**

```json
{
    "message": "Инвайт-код активирован успешно."
}
```

## Документация OpenAPI
- Пользовательский интерфейс Swagger: Swagger UI
- ReDoc: ReDoc


## Важные замечания:
- При активации инвайт-кода, система проверяет его на уникальность и активность. Если код уже был использован или не существует, будет возвращена ошибка.
- Инвайт-код должен быть передан в теле запроса, и только в этом случае можно активировать код.
- Если у пользователя уже был активирован инвайт-код, повторная активация не требуется, и будет возвращено сообщение, что код уже активирован.


## Проверка актуальности и ошибок:
- Все телефонные номера правильные и соответствуют формату.
- Инвайт-код не был использован ранее.
- Все коды проверены и имеют срок действия (если указано в системе).
